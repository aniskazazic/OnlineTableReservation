<app-sidebar></app-sidebar>
<div class="dashboard-container">
  <header class="dashboard-header">
    <div class="header-content">
      <div class="header-title-container">
        <h1 class="header-title">Restaurant Owner Dashboard</h1>
        <p class="header-subtitle">Manage your reservations, tables, and staff</p>
      </div>
    </div>
  </header>

  <main class="dashboard-main">
    <div class="tabs-container">
      <div class="tabs-border">
        <nav class="tabs-nav">
          <button class="tab-button " (click)="toOverview()" >Overview</button>
          <button  class="tab-button" (click)="toLocaleReservations()"  >Reservations</button>
          <button   *ngIf="localeId !== 0" class="tab-button" [routerLink]="['/public/tablelayout', localeId]" >Tables</button>
          <button class="tab-button" (click)="toWorkers()">Workers</button>
          <button class="tab-button tab-active">Settings</button>
        </nav>
      </div>
    </div>
  </main>



<div class="language-selector">
  <label for="language">{{ 'SELECT.LAN' | translate }}:</label>
  <select id="language" (change)="changeLanguage($event)">
    <option value="en" [selected]="currentLang === 'en'">{{ 'ENGLISH' | translate }}</option>
    <option value="bs" [selected]="currentLang === 'bs'">{{ 'BOSNIAN' | translate }}</option>
  </select>
</div>


<div *ngIf="isLoading" class="loading-spinner">Loading...</div>
<div class="locale-form-container" *ngIf="!isLoading">
  <h2>{{ 'EDITLOCALE.CHANGES' | translate }}</h2>
  <form (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="name">{{ 'EDITLOCALE.NAME' | translate }}:</label>
      <input
        id="name"
        [(ngModel)]="localeDetails.name"
        name="name"
        type="text"
        class="form-control"
        placeholder="Enter locale name"
        required
      />
    </div>

    <div class="form-group">
      <label for="cityId">{{ 'EDITLOCALE.CITY' | translate }}:</label>
      <select
        id="cityId"
        [(ngModel)]="localeDetails.cityId"
        name="cityId"
        class="form-control"
        required
      >
        <option *ngFor="let city of cities" [value]="city.id">
          {{ city.name }}
        </option>
      </select>
    </div>

    <div class="form-group">
      <label for="categoryId">{{ 'EDITLOCALE.CATEGORY' | translate }}:</label>
      <select
        id="categoryId"
        [(ngModel)]="localeDetails.categoryId"
        name="categoryId"
        class="form-control"
        required
      >
        <option *ngFor="let category of categories" [value]="category.id">
          {{ category.name }}
        </option>
      </select>
    </div>


    <div class="form-group">
      <label for="startOfWorkingHours">{{ 'EDITLOCALE.STARTOFWORKINGHOURS' | translate }}:</label>
      <input
        id="startOfWorkingHours"
        [(ngModel)]="localeDetails.startOfWorkingHoursFormatted"
        name="startOfWorkingHours"
        type="time"
        class="form-control"
        required
      />
    </div>

    <div class="form-group">
      <label for="endOfWorkingHours">{{ 'EDITLOCALE.ENDOFWORKINGHOURS' | translate }}:</label>
      <input
        id="endOfWorkingHours"
        [(ngModel)]="localeDetails.endOfWorkingHoursFormatted"
        name="endOfWorkingHours"
        type="time"
        class="form-control"
        required
      />
    </div>


    <div class="form-group">
      <label for="address">{{ 'EDITLOCALE.ADDRESS' | translate }}:</label>
      <input
        id="address"
        [(ngModel)]="localeDetails.address"
        name="address"
        type="text"
        class="form-control"
        placeholder="Enter address"
        required
      />
    </div>
    <div class="form-group">
      <label for="lengthOfReservation">{{ 'EDITLOCALE.LENGTHOFRESERVATION' | translate }}:</label>
      <select
        id="lengthOfReservation"
        name="lengthOfReservation"
        [(ngModel)]="localeDetails.lengthOfReservation"
        class="form-control"
        required
      >
        <option [value]="0.25">{{ 'EDITLOCALE.15MIN' | translate }}</option>
        <option [value]="0.5">{{ 'EDITLOCALE.30MIN' | translate }}</option>
        <option [value]="0.75">{{ 'EDITLOCALE.45MIN' | translate }}</option>
        <option [value]="1.0">{{ 'EDITLOCALE.60MIN' | translate }}</option>
        <option [value]="1.5">{{ 'EDITLOCALE.90MIN' | translate }}</option>
        <option [value]="2.0">{{ 'EDITLOCALE.120MIN' | translate }}</option>
      </select>
    </div>
    <div class="form-group full-width logo-container">
      <div>
        <label for="logo">{{ 'EDITLOCALE.LOGO' | translate }}:</label>
        <input type="file" id="logo" (change)="onLogoFileSelect($event)" />
        <small style="display:block; color:#64748b; margin-top:6px;">
          PNG/JPG/SVG, will be stored as Data URL (base64).
        </small>
      </div>

      <div class="logo-preview" *ngIf="logoPreview">
        <img [src]="logoPreview" alt="Logo Preview" />
      </div>
    </div>







    <button type="submit" class="btn-submit">{{ 'EDITLOCALE.UPDATELOCALE' | translate }}</button>
  </form>
</div>
  <div class="delete-locale-container">
    <button class="delete-locale" (click)="openRemoveModal()">Delete Locale</button>
  </div>

</div>

<div class="modal-backdrop" *ngIf="showModal===true">
  <div class="modal">
    <h3>Delete this locale?</h3>
    <p>Are you sure you want to delete this locale?</p>
    <div class="modal-buttons">
      <button class="confirm-btn" (click)="confirmRemove()">Yes</button>
      <button class="cancel-btn" (click)="cancelRemove()">No</button>
    </div>
  </div>
</div>

